# K001_物品購入申請承認フロー

## ✅ このリポジトリについて
このリポジトリでは、**Power Automateを使って「物品購入申請の承認フロー」を自動化する方法**を紹介します。  
Microsoft Formsで申請を受け取り、承認依頼を送信し、結果をTeamsに通知するまでを一括で実現します。  
初心者でも安心して試せるよう、**フロー.zipを公開**しています。

---

## 🚀 特徴
- **Power Automate × Microsoft Forms × Teams連携**
- **業務改善に直結する承認ワークフロー**
- **Low-Codeで誰でも構築可能**
- SEOキーワード：Power Automate, workflow automation, low-code, RPA

---

## 📂 フロー概要
- **フロー名**：K001_物品購入申請承認フロー  
- **実現すること**：
  - Microsoft Formsで申請を受け取る
  - 承認者にTeamsで承認依頼を送信
  - 承認結果を申請者に通知

---

## 🔽 ダウンロード
- **フローZIP**：`./flows/K001_ApprovalFlow.zip`

---

## 🛠 インポート手順（ZIPを使う場合）
1. Power Automateポータルにアクセス
2. 「ソリューション」→「インポート」からZIPファイルを選択
3. 接続情報（Forms、Approvals、Teams）を設定
4. 保存して有効化

---

## 🛠 一から作成する場合の詳細手順
以下の手順で、動画やブログ記事を見ながら自分で作成できます。

### ✅ ステップ1：トリガーを設定
- **カテゴリ**：Microsoft Forms  
- **アクション**：「新しい応答が送信されたとき」  
- **設定**：
  - フォームIDを選択（物品購入申請フォーム）

### ✅ ステップ2：回答の詳細を取得
- **カテゴリ**：Microsoft Forms  
- **アクション**：「応答の詳細を取得する」  
- **設定**：
  ```powerfx
  @triggerOutputs()?['body/resourceData/responseId']
  ```

### ✅ ステップ3：承認依頼を送信
- **カテゴリ**：承認  
- **アクション**：「開始して承認を待機」  
- **設定**：
  - タイトル：`購入品の承認をお願いします`
  - 詳細：
    ```powerfx
    申請理由：@{outputs('応答の詳細を取得する')?['body/rca14f68076e14783bcab6c0da27aac34']}
    ```

### ✅ ステップ4：条件分岐で承認結果を判定
- **カテゴリ**：制御  
- **アクション**：「条件」  
- **式**：
    ```powerfx
    @equals(outputs('開始して承認を待機')?['body/outcome'], 'Approve')
    ```

### ✅ ステップ5：Teamsに通知
- **カテゴリ**：Microsoft Teams  
- **アクション**：「チャットまたはチャネルでメッセージを投稿する」  
- **本文**：
    ```
    以下の申請が承認されました。
    申請物品名：@{outputs('応答の詳細を取得する')?['body/r7de8f166d17b4edca8de938c3ab221ef']}
    購入金額：@{outputs('応答の詳細を取得する')?['body/r1b9d81fb804c4d51a22d7b2aaeb234bf']}
    承認者のコメント：@{items('For_each')?['comments']}
    ```

---

## ✅ テスト方法
1. Formsで申請フォームを作成
2. フローを実行し、承認依頼がTeamsに届くか確認
3. 承認結果が申請者に通知されるか確認

---

## 📌 関連リンク
- **ブログ記事**：https://your-blog-url
- **YouTube動画**：https://your-youtube-url

---

## 📜 ライセンス
MIT License  
自由に利用・改変できますが、クレジットを残していただけると嬉しいです。

---

⭐ **このリポジトリが役立ったら、ぜひStarをお願いします！**
